(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7cf1782a"],{"57ca":function(t,o,e){"use strict";e.r(o);var r=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"app-container"},[e("el-button",{staticStyle:{margin:"10px",float:"right"},attrs:{type:"primary"},on:{click:function(o){return t.addPortfolio()}}},[t._v("添加组合")]),e("div",{staticStyle:{width:"1400px",height:"300px"}},[e("div",{ref:"portfolioPie",staticStyle:{width:"600px",height:"300px","margin-bottom":"10px",float:"left"}}),e("div",{ref:"portfolioLine",staticStyle:{width:"600px",height:"300px","margin-bottom":"10px",float:"left"}})]),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"1400px"},attrs:{data:t.portfolioList,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[e("el-table-column",{attrs:{align:"center",label:"序号",width:"95"},scopedSlots:t._u([{key:"default",fn:function(o){return[t._v(" "+t._s(o.$index+1)+" ")]}}])}),e("el-table-column",{attrs:{align:"center",label:"组合名称"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("span",[t._v(t._s(o.row.name))])]}}])}),e("el-table-column",{attrs:{align:"center",label:"组合价值"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("span",[t._v(t._s(o.row.money))])]}}])}),e("el-table-column",{attrs:{align:"center",label:"盈利"},scopedSlots:t._u([{key:"default",fn:function(o){return[o.row.profit>0?e("span",{staticStyle:{color:"red","font-weight":"bolder"}},[t._v(t._s(o.row.profit))]):t._e(),o.row.profit<0?e("span",{staticStyle:{color:"green","font-weight":"bolder"}},[t._v(t._s(o.row.profit))]):t._e(),0==o.row.profit?e("span",[t._v(t._s(o.row.profit))]):t._e()]}}])}),e("el-table-column",{attrs:{align:"center",label:"收益率"},scopedSlots:t._u([{key:"default",fn:function(o){return[o.row.profitRate>0?e("span",{staticStyle:{color:"red"}},[t._v(t._s(o.row.profitRate)+"%")]):t._e(),o.row.profitRate<0?e("span",{staticStyle:{color:"green"}},[t._v(t._s(o.row.profitRate)+"%")]):t._e(),0==o.row.profitRate?e("span",[t._v(t._s(o.row.profitRate)+"%")]):t._e()]}}])}),e("el-table-column",{attrs:{align:"center",label:"更新时间"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("span",[t._v(t._s(o.row.updateTime))])]}}])}),e("el-table-column",{attrs:{align:"center",label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("span",[t._v(t._s(o.row.createTime))])]}}])}),e("el-table-column",{attrs:{align:"center",label:"查看"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){return t.getDetail(o.row.id)}}},[t._v("详情")])]}}])}),e("el-table-column",{attrs:{align:"center",label:"记录"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){return t.recordPortfolio(o.row.id,o.row.name,o.row.type)}}},[t._v("变动")])]}}])})],1),e("br"),e("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"prev, pager, next","current-page":t.currentPage,"page-size":t.pageSize,total:t.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),e("el-drawer",{attrs:{visible:t.addPortfolioDrawerVisible,direction:t.direction,size:"400px",title:"更新组合(先更新当日收益情况，再更新转入转出操作哦！)"},on:{"update:visible":function(o){t.addPortfolioDrawerVisible=o},close:function(o){return t.$refs["addPortfolioForm"].resetFields()}}},[e("el-form",{ref:"addPortfolioForm",staticStyle:{"margin-left":"20px"},attrs:{model:t.addPortfolioForm,rules:t.addPortfolioRules,"label-width":"100px",size:"mini"},nativeOn:{submit:function(t){t.preventDefault()}}},[e("el-form-item",{attrs:{label:"组合名称",prop:"name"}},[e("el-input",{staticStyle:{width:"180px"},model:{value:t.addPortfolioForm.name,callback:function(o){t.$set(t.addPortfolioForm,"name",o)},expression:"addPortfolioForm.name"}})],1),e("el-form-item",[e("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],model:{value:t.addPortfolioForm.portfolioId,callback:function(o){t.$set(t.addPortfolioForm,"portfolioId",o)},expression:"addPortfolioForm.portfolioId"}})],1),e("el-form-item",{attrs:{label:"总金额",prop:"newMoney"}},[e("el-input-number",{staticStyle:{width:"180px"},attrs:{precision:2,step:.01},model:{value:t.addPortfolioForm.newMoney,callback:function(o){t.$set(t.addPortfolioForm,"newMoney",o)},expression:"addPortfolioForm.newMoney"}})],1),e("el-form-item",{attrs:{label:"盈利金额",prop:"profit"}},[e("el-input-number",{staticStyle:{width:"180px"},attrs:{precision:2,step:.01},model:{value:t.addPortfolioForm.profit,callback:function(o){t.$set(t.addPortfolioForm,"profit",o)},expression:"addPortfolioForm.profit"}})],1),e("el-form-item",{attrs:{label:"收益率",prop:"profitRate"}},[e("el-input-number",{staticStyle:{width:"180px"},attrs:{precision:2,step:.01},model:{value:t.addPortfolioForm.profitRate,callback:function(o){t.$set(t.addPortfolioForm,"profitRate",o)},expression:"addPortfolioForm.profitRate"}})],1),e("el-form-item",{attrs:{label:"组合类型",prop:"type"}},[e("el-radio",{attrs:{label:"0"},model:{value:t.addPortfolioForm.type,callback:function(o){t.$set(t.addPortfolioForm,"type",o)},expression:"addPortfolioForm.type"}},[t._v("稳健")]),e("el-radio",{attrs:{label:"1"},model:{value:t.addPortfolioForm.type,callback:function(o){t.$set(t.addPortfolioForm,"type",o)},expression:"addPortfolioForm.type"}},[t._v("积极")]),e("el-radio",{attrs:{label:"2"},model:{value:t.addPortfolioForm.type,callback:function(o){t.$set(t.addPortfolioForm,"type",o)},expression:"addPortfolioForm.type"}},[t._v("定投")])],1),e("el-form-item",{attrs:{label:"变动时间"}},[e("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.addPortfolioForm.createTime,callback:function(o){t.$set(t.addPortfolioForm,"createTime",o)},expression:"addPortfolioForm.createTime"}})],1),e("el-form-item",{staticStyle:{"text-align":"left"}},[e("el-button",{attrs:{type:"primary"},on:{click:function(o){return t.submitForm("addPortfolioForm")}}},[t._v("添加")]),e("el-button",{on:{click:function(o){return t.resetForm("addPortfolioForm")}}},[t._v("重置")])],1)],1)],1)],1)},i=[],a=(e("b0c0"),e("6844")),l={data:function(){return{portfolioList:[],listLoading:!0,currentPage:1,totalCount:1,pageSize:20,addPortfolioDrawerVisible:!1,direction:"rtl",accountId:"0",accountName:"蛋卷平台",addPortfolioForm:{portfolioId:"",name:"",newMoney:"",profit:"",profitRate:"",type:"0",createTime:""},addPortfolioRules:{name:[{required:!0,message:"请输入组合名称",trigger:"blur"}]},pieData:[],dateList:[],totalAmount:[],totalPrincipal:[]}},mounted:function(){this.getChartData()},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.listLoading=!0,Object(a["d"])({page:this.currentPage,pageSize:this.pageSize,accountId:this.accountId}).then((function(o){t.portfolioList=o.data.portfolioList,t.currentPage=o.data.currentPage,t.totalCount=o.data.totalNum,t.listLoading=!1}))},handleSizeChange:function(t){this.pageSize=t,this.currentPage=1},handleCurrentChange:function(t){this.currentPage=t},submitForm:function(t){var o=this;this.$refs[t].validate((function(t){t?Object(a["e"])({portfolioId:o.addPortfolioForm.portfolioId,name:o.addPortfolioForm.name,newMoney:o.addPortfolioForm.newMoney,profit:o.addPortfolioForm.profit,profitRate:o.addPortfolioForm.profitRate,accountId:o.accountId,accountName:o.accountName,type:o.addPortfolioForm.type,createTime:o.addPortfolioForm.createTime}).then((function(t){o.$message({message:"保存成功",type:"success"}),o.addPortfolioDrawerVisible=!1,o.fetchData()})):o.$message.error("请填写全部内容后，再提交!!!")}))},resetForm:function(t){this.$refs[t]&&this.$refs[t].resetFields()},addPortfolio:function(){this.addPortfolioForm.portfolioId="",this.addPortfolioForm.name="",this.addPortfolioForm.newMoney=0,this.addPortfolioForm.profit=0,this.addPortfolioForm.profitRate=0,this.addPortfolioDrawerVisible=!0},getDetail:function(t){this.$router.push({path:"/assets/portfolio",name:"egg-roll-detail",params:{id:t}})},recordPortfolio:function(t,o,e){this.addPortfolioForm.portfolioId=t,this.addPortfolioForm.name=o,this.addPortfolioForm.type=e,this.addPortfolioForm.newMoney=0,this.addPortfolioForm.profit=0,this.addPortfolioForm.profitRate=0,this.addPortfolioDrawerVisible=!0},getChartData:function(){var t=this;Object(a["a"])(0).then((function(o){var e=o.data;t.pieData=e.pieList,t.dateList=e.dateList,t.totalAmount=e.totalAmount,t.totalPrincipal=e.totalPrincipal,t.initCharts()}))},initCharts:function(){var t=this.$refs.portfolioPie,o=this.$refs.portfolioLine,e=this.$echarts.init(t,"walden"),r=this.$echarts.init(o,"walden"),i={animationDuration:2e3,title:{text:"各个基金占比"},tooltip:{trigger:"item",formatter:"{b} : {c}({d}%)"},series:[{type:"pie",radius:"80%",data:this.pieData}]},a={animationDuration:2e3,title:{text:"基金组合总资产"},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:["总资产","总成本"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:this.dateList},yAxis:{type:"value"},series:[{name:"总资产",data:this.totalAmount,type:"line",lineStyle:{width:2}},{name:"总成本",data:this.totalPrincipal,type:"line",lineStyle:{width:2}}]};e.setOption(i),r.setOption(a)}}},n=l,d=e("2877"),s=Object(d["a"])(n,r,i,!1,null,null,null);o["default"]=s.exports},6844:function(t,o,e){"use strict";e.d(o,"a",(function(){return i})),e.d(o,"d",(function(){return a})),e.d(o,"e",(function(){return l})),e.d(o,"b",(function(){return n})),e.d(o,"c",(function(){return d}));var r=e("b775");function i(t){return Object(r["a"])({url:"/portfolio/chart/"+t,method:"GET"})}function a(t){return Object(r["a"])({url:"/portfolio/page",method:"POST",data:t})}function l(t){return Object(r["a"])({url:"/portfolio/change",method:"POST",data:t})}function n(t){return Object(r["a"])({url:"/portfolio/detail/chart/"+t,method:"GET"})}function d(t){return Object(r["a"])({url:"/portfolio/detailPage",method:"POST",data:t})}}}]);