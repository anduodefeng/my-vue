(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2dc98550"],{"222b":function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"d",(function(){return i})),n.d(e,"e",(function(){return o})),n.d(e,"b",(function(){return d})),n.d(e,"c",(function(){return l}));var a=n("b775");function r(t){return Object(a["a"])({url:"/fund/chart/"+t,method:"GET"})}function i(t){return Object(a["a"])({url:"/fund/page",method:"POST",data:t})}function o(t){return Object(a["a"])({url:"/fund/change",method:"POST",data:t})}function d(t){return Object(a["a"])({url:"/fund/detail/chart/"+t,method:"GET"})}function l(t){return Object(a["a"])({url:"/fund/detailPage",method:"POST",data:t})}},c96a:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-button",{staticStyle:{margin:"10px",float:"right"},attrs:{type:"primary"},on:{click:function(e){return t.addFund()}}},[t._v("添加基金")]),n("div",{staticStyle:{width:"1400px",height:"300px"}},[n("div",{ref:"fundPie",staticStyle:{width:"600px",height:"300px","margin-bottom":"10px",float:"left"}}),n("div",{ref:"totalLine",staticStyle:{width:"600px",height:"300px","margin-bottom":"10px",float:"left"}})]),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"1400px"},attrs:{data:t.fundList,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{align:"center",label:"序号",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.$index+1)+" ")]}}])}),n("el-table-column",{attrs:{align:"center",label:"基金代码"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.code)+" ")]}}])}),n("el-table-column",{attrs:{align:"center",label:"基金名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.name))])]}}])}),n("el-table-column",{attrs:{align:"center",label:"基金价值"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.money))])]}}])}),n("el-table-column",{attrs:{align:"center",label:"盈利"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.profit>0?n("span",{staticStyle:{color:"red","font-weight":"bolder"}},[t._v(t._s(e.row.profit))]):t._e(),e.row.profit<0?n("span",{staticStyle:{color:"green","font-weight":"bolder"}},[t._v(t._s(e.row.profit))]):t._e(),0==e.row.profit?n("span",[t._v(t._s(e.row.profit))]):t._e()]}}])}),n("el-table-column",{attrs:{align:"center",label:"收益率"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.profitRate>0?n("span",{staticStyle:{color:"red","font-weight":"bolder"}},[t._v(t._s(e.row.profitRate)+"%")]):t._e(),e.row.profitRate<0?n("span",{staticStyle:{color:"green","font-weight":"bolder"}},[t._v(t._s(e.row.profitRate)+"%")]):t._e(),0==e.row.profitRate?n("span",[t._v(t._s(e.row.profitRate)+"%")]):t._e()]}}])}),n("el-table-column",{attrs:{align:"center",label:"更新时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.updateTime))])]}}])}),n("el-table-column",{attrs:{align:"center",label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.createTime))])]}}])}),n("el-table-column",{attrs:{align:"center",label:"查看"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary",plain:""},on:{click:function(n){return t.getDetail(e.row.code)}}},[t._v("详情")])]}}])}),n("el-table-column",{attrs:{align:"center",label:"记录"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary",plain:""},on:{click:function(n){return t.recordFund(e.row.code,e.row.name)}}},[t._v("更新")])]}}])})],1),n("br"),n("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"prev, pager, next","current-page":t.currentPage,"page-size":t.pageSize,total:t.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),n("el-drawer",{attrs:{visible:t.addFundDrawerVisible,direction:t.direction,size:"400px",title:"添加基金"},on:{"update:visible":function(e){t.addFundDrawerVisible=e},close:function(e){return t.$refs["addFundForm"].resetFields()}}},[n("el-form",{ref:"addFundForm",staticStyle:{"margin-left":"90px"},attrs:{model:t.addFundForm,rules:t.addFundRules,"label-width":"80px",size:"mini"},nativeOn:{submit:function(t){t.preventDefault()}}},[n("el-form-item",{attrs:{label:"基金名称",prop:"name"}},[n("el-input",{staticStyle:{width:"180px"},model:{value:t.addFundForm.name,callback:function(e){t.$set(t.addFundForm,"name",e)},expression:"addFundForm.name"}})],1),n("el-form-item",{attrs:{label:"基金代码",prop:"code"}},[n("el-input",{staticStyle:{width:"180px"},model:{value:t.addFundForm.code,callback:function(e){t.$set(t.addFundForm,"code",e)},expression:"addFundForm.code"}})],1),n("el-form-item",{attrs:{label:"最新金额",prop:"newMoney"}},[n("el-input-number",{staticStyle:{width:"180px"},attrs:{precision:2,step:.01},model:{value:t.addFundForm.newMoney,callback:function(e){t.$set(t.addFundForm,"newMoney",e)},expression:"addFundForm.newMoney"}})],1),n("el-form-item",{attrs:{label:"盈利金额",prop:"profit"}},[n("el-input-number",{staticStyle:{width:"180px"},attrs:{precision:2,step:.01},model:{value:t.addFundForm.profit,callback:function(e){t.$set(t.addFundForm,"profit",e)},expression:"addFundForm.profit"}})],1),n("el-form-item",{attrs:{label:"收益率",prop:"profitRate"}},[n("el-input-number",{staticStyle:{width:"180px"},attrs:{precision:2,step:.01},model:{value:t.addFundForm.profitRate,callback:function(e){t.$set(t.addFundForm,"profitRate",e)},expression:"addFundForm.profitRate"}})],1),n("el-form-item",{attrs:{label:"记录时间"}},[n("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.addFundForm.createTime,callback:function(e){t.$set(t.addFundForm,"createTime",e)},expression:"addFundForm.createTime"}})],1),n("el-form-item",{staticStyle:{"text-align":"left"}},[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("addFundForm")}}},[t._v("添加")]),n("el-button",{on:{click:function(e){return t.resetForm("addFundForm")}}},[t._v("重置")])],1)],1)],1)],1)},r=[],i=(n("b0c0"),n("222b")),o={data:function(){return{fundList:[],listLoading:!0,currentPage:1,totalCount:1,pageSize:20,addFundDrawerVisible:!1,direction:"rtl",addFundForm:{code:"",name:"",newMoney:"",profit:"",profitRate:"",fundType:"1",createTime:""},addFundRules:{name:[{required:!0,message:"请输入基金信息",trigger:"blur"}],code:[{required:!0,message:"请输入基金代码",trigger:"blur"}]},pieData:[],fundNameList:[],dateList:[],totalAmount:[],totalPrincipal:[]}},mounted:function(){this.getChartData()},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.listLoading=!0,Object(i["d"])({page:this.currentPage,pageSize:this.pageSize,type:"1"}).then((function(e){t.fundList=e.data.fundList,t.currentPage=e.data.currentPage,t.totalCount=e.data.totalNum,t.listLoading=!1}))},handleSizeChange:function(t){this.pageSize=t,this.currentPage=1},handleCurrentChange:function(t){this.currentPage=t},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){t?Object(i["e"])({code:e.addFundForm.code,name:e.addFundForm.name,newMoney:e.addFundForm.newMoney,profit:e.addFundForm.profit,profitRate:e.addFundForm.profitRate,fundType:e.addFundForm.fundType,createTime:e.addFundForm.createTime}).then((function(t){e.$message({message:"保存成功",type:"success"}),e.addFundDrawerVisible=!1,e.fetchData()})):e.$message.error("请填写全部内容后，在提交!!!")}))},resetForm:function(t){this.$refs[t]&&this.$refs[t].resetFields()},addFund:function(){this.addFundForm.code="",this.addFundForm.name="",this.addFundForm.profit=0,this.addFundForm.profitRate=0,this.addFundForm.newMoney=0,this.addFundDrawerVisible=!0},getDetail:function(t){this.$router.push({path:"/assets/fund",name:"indexFundDetail",params:{code:t}})},recordFund:function(t,e){this.addFundForm.code=t,this.addFundForm.name=e,this.addFundForm.profit=0,this.addFundForm.profitRate=0,this.addFundForm.newMoney=0,this.addFundDrawerVisible=!0},getChartData:function(){var t=this;Object(i["a"])(1).then((function(e){var n=e.data;t.pieData=n.pieList,t.fundNameList=n.fundNameList,t.dateList=n.dateList,t.totalAmount=n.totalAmount,t.totalPrincipal=n.totalPrincipal,t.initCharts()}))},initCharts:function(){var t=this.$refs.fundPie,e=this.$refs.totalLine,n=this.$echarts.init(t,"walden"),a=this.$echarts.init(e,"walden"),r={animationDuration:2e3,title:{text:"基金占比"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},tooltip:{trigger:"item",formatter:"{b} : {c}({d}%)"},series:[{type:"pie",radius:"60%",data:this.pieData}]},i={animationDuration:2e3,title:{text:"主动基金总资产"},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:["总资产","总成本"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:this.dateList},yAxis:{type:"value"},series:[{name:"总资产",data:this.totalAmount,type:"line",lineStyle:{width:2}},{name:"总成本",data:this.totalPrincipal,type:"line",lineStyle:{width:2}}]};n.setOption(r),a.setOption(i)}}},d=o,l=n("2877"),u=Object(l["a"])(d,a,r,!1,null,null,null);e["default"]=u.exports}}]);